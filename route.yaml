---
# OpenShift Route for Nextcloud
# 
# Apply with: oc apply -f route.yaml
#
# Make sure to update the hostname before applying!

apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: nextcloud
  labels:
    app.kubernetes.io/name: nextcloud
    app.kubernetes.io/component: app
  annotations:
    # Extended timeout for large file uploads
    haproxy.router.openshift.io/timeout: 600s
spec:
  # CHANGE THIS to your actual hostname
  host: nextcloud.apps.example.com
  to:
    kind: Service
    name: nextcloud
    weight: 100
  port:
    # Must target nginx port (8080), not PHP-FPM (9000)
    targetPort: 8080
  tls:
    termination: edge
    insecureEdgeTerminationPolicy: Redirect
  wildcardPolicy: None
